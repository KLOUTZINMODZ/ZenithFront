/* ========================================
   Sidebar - Mobile Fixes
   ======================================== */

/* Classe base do sidebar */
.sidebar-fixed {
  position: fixed;
  height: 100vh;
  height: 100dvh;
  overflow-y: auto;
  overflow-x: hidden;
}

/* Desktop: sidebar sempre visível */
@media (min-width: 1024px) {
  .sidebar-fixed {
    z-index: 30 !important;
  }
}

/* Mobile: sidebar overlay com z-index alto */
@media (max-width: 1023px) {
  /* Sidebar acima do header */
  .sidebar-fixed {
    z-index: 9998 !important;
    top: 0 !important;
    bottom: 0 !important;
    height: 100vh !important;
    height: 100dvh !important;
  }
  
  /* Overlay backdrop */
  .sidebar-backdrop {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 9997 !important;
    transition: opacity 300ms ease-in-out;
    backdrop-filter: blur(2px);
  }
  
  /* Prevenir scroll quando sidebar está aberto */
  body.sidebar-open {
    overflow: hidden !important;
    position: fixed;
    width: 100%;
    height: 100%;
  }
  
  /* Prevenir interação com conteúdo de fundo */
  body.sidebar-open > *:not(.sidebar-fixed):not(.sidebar-backdrop) {
    pointer-events: none;
  }
  
  /* Garantir que sidebar e backdrop sejam interativos */
  .sidebar-fixed,
  .sidebar-backdrop {
    pointer-events: auto !important;
  }
}

/* Animação de entrada/saída do sidebar já está no inline style */

/* Scrollbar personalizada para o sidebar */
.sidebar-fixed::-webkit-scrollbar {
  width: 6px;
}

.sidebar-fixed::-webkit-scrollbar-track {
  background: rgb(31, 41, 55);
}

.sidebar-fixed::-webkit-scrollbar-thumb {
  background: rgb(55, 65, 81);
  border-radius: 3px;
}

.sidebar-fixed::-webkit-scrollbar-thumb:hover {
  background: rgb(75, 85, 99);
}

/* Garantir que o conteúdo do sidebar seja totalmente visível */
@media (max-width: 1023px) {
  .sidebar-fixed {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Prevenir overflow horizontal */
.sidebar-fixed {
  max-width: 100vw;
  box-sizing: border-box;
}

/* Otimização de performance */
.sidebar-fixed {
  -webkit-overflow-scrolling: touch;
}

/* Garantir que overlay cubra tudo, incluindo header */
@media (max-width: 1023px) {
  .sidebar-backdrop {
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
  }
}
